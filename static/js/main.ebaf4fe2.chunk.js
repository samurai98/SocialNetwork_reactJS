(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return f}));var a=n(94),r=n(0),o=n.n(r),s=n(25),c=n.n(s),i=n(93),u=function(e){var t=e.input,n=e.meta,r=Object(a.a)(e,["input","meta"]),s=n.touched&&n.error;return o.a.createElement("div",{className:"".concat(c.a.formControl," ").concat(s?c.a.error:"")},o.a.createElement("div",null,o.a.createElement("textarea",Object.assign({},t,r)," ")),s&&o.a.createElement("span",null,n.error))},l=function(e){var t=e.input,n=e.meta,r=Object(a.a)(e,["input","meta"]),s=n.touched&&n.error;return o.a.createElement("div",{className:"".concat(c.a.formControl," ").concat(s?c.a.error:"")},o.a.createElement("label",null,o.a.createElement("input",Object.assign({className:"checkbox"===r.type?"":c.a.input},t,r)),o.a.createElement("span",null,r.text)))},f=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return o.a.createElement("div",null,o.a.createElement(i.a,Object.assign({placeholder:e,name:t,validate:n,component:a},r)))}},100:function(e,t,n){e.exports={login:"Login_login__1ckvj",button:"Login_button__1i2Hw"}},102:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(136),s=n.n(o);t.a=function(e){var t=e.user,n=e.followingInProgress,a=e.unfollow,o=e.follow,c=e.isAuth;return r.a.createElement("div",{className:s.a.follow},c?t.followed?r.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t.id)}},"Unfollow"):r.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){o(t.id)}},"Follow"):r.a.createElement("br",null))}},11:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i}));var a=n(145),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"641371ec-d5ac-4e54-91b7-f9eab8c7c8f0"}}),o={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},getAuth:function(){return r.get("auth/me").then((function(e){return e.data}))},followUser:function(e){return r.post("follow/".concat(e),{}).then((function(e){return e.data}))},unfollowUser:function(e){return r.delete("follow/".concat(e)).then((function(e){return e.data}))},getProfile:function(e){return console.warn("Obsolete method. Please use profileAPI object"),s.getProfile(e)},getFriends:function(){return r.get("users?friend=true").then((function(e){return e.data}))}},s={getProfile:function(e){return r.get("profile/".concat(e))},getStatus:function(e){return r.get("profile/status/".concat(e))},updateStatus:function(e){return r.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),r.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return r.put("profile",e)}},c={me:function(){return r.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a})},getAuthUserPhoto:function(e){return r.get("users?term=".concat(e)).then((function(e){return e.data.items[0].photos.small}))},logout:function(){return r.post("auth/logout")}},i={getCaptchaUrl:function(){return r.get("security/get-captcha-url")}}},133:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(48),r=n(8),o="samurai-network/dialogs/ADD-MESSAGE",s={messages:[{id:1,message:"Hi"},{id:2,message:"How are you"},{id:3,message:"Yo"}],dialogs:[{id:1,name:"Vlad"},{id:2,name:"Ksenka"},{id:3,name:"Vlad2"},{id:4,name:"Vlad3"}]},c=function(e){return{type:o,newMessageBody:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n={id:4,message:t.newMessageBody};return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[n]),newMessageText:""});default:return e}}},136:function(e,t,n){e.exports={follow:"FollowButton_follow__3BcdS"}},138:function(e,t,n){e.exports=n.p+"static/media/home.b7d39a22.svg"},139:function(e,t,n){e.exports=n.p+"static/media/users.8c8f2cf9.svg"},140:function(e,t,n){e.exports=n.p+"static/media/dialogs.a7f4f3bb.svg"},141:function(e,t,n){e.exports=n.p+"static/media/news.7d2f6fd9.svg"},142:function(e,t,n){e.exports=n.p+"static/media/music.c640764b.svg"},143:function(e,t,n){e.exports=n.p+"static/media/settings.c9bff2d9.svg"},146:function(e,t,n){e.exports={development:"News_development__1wvEs"}},147:function(e,t,n){e.exports={development:"Music_development__1G8DI"}},148:function(e,t,n){e.exports={development:"Settings_development__3o0PX"}},149:function(e,t,n){e.exports={content:"Profile_content__37cEd"}},150:function(e,t,n){e.exports=n.p+"static/media/preloader.461855b2.gif"},151:function(e,t,n){e.exports=n.p+"static/media/add.f1acb7c8.svg"},153:function(e,t,n){e.exports={item:"Post_item__12-5_"}},154:function(e,t,n){e.exports=n.p+"static/media/logo.17f9b74b.png"},16:function(e,t,n){e.exports={profileInfo:"ProfileInfo_profileInfo__3_rjO",mainInfo:"ProfileInfo_mainInfo__1EyZL",photoBlock:"ProfileInfo_photoBlock__2ppfm",mainPhoto:"ProfileInfo_mainPhoto__22PcL",newPhoto:"ProfileInfo_newPhoto__3X1Y0",addPhoto:"ProfileInfo_addPhoto__S_HTC",fullName:"ProfileInfo_fullName__30GY9",status:"ProfileInfo_status__1b7o9",profileData:"ProfileInfo_profileData__1_p4H",editButton:"ProfileInfo_editButton__1MRIr",contact:"ProfileInfo_contact__2_otk"}},17:function(e,t,n){e.exports={nav:"Navbar_nav__vkL5V",item:"Navbar_item__2zYPy",activeLink:"Navbar_activeLink__3wU96",friends:"Navbar_friends__115UL",noFriends:"Navbar_noFriends__312Db"}},181:function(e,t,n){e.exports=n(307)},186:function(e,t,n){},187:function(e,t,n){},25:function(e,t,n){e.exports={input:"FormsControls_input__1_Z4_",formControl:"FormsControls_formControl__3cmBD",error:"FormsControls_error__1PMAS",formSummaryError:"FormsControls_formSummaryError__1aEJB"}},307:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(0),r=n.n(a),o=n(70),s=n.n(o),c=(n(186),n(39)),i=n(40),u=n(41),l=n(42),f=(n(187),n(17)),m=n.n(f),p=n(13),d=n(75),h=n.n(d),v=n(71),b=n.n(v),g=n(102),E=function(e){var t=e.friend,n=e.followingInProgress,a=e.follow,o=e.unfollow,s=e.isAuth;return r.a.createElement("div",{className:h.a.content},r.a.createElement("div",{className:h.a.ava},r.a.createElement(p.b,{title:t.name,to:"/profile/"+t.id},r.a.createElement("img",{src:t.photos.small||b.a,alt:"ava"}))),r.a.createElement("div",{className:h.a.name},r.a.createElement(p.b,{title:t.name,to:"/profile/"+t.id},t.name)),r.a.createElement(g.a,{user:t,followingInProgress:n,follow:a,unfollow:o,isAuth:s}))},_=n(138),w=n.n(_),O=n(139),P=n.n(O),k=n(140),j=n.n(k),y=n(141),N=n.n(y),S=n(142),x=n.n(S),C=n(143),I=n.n(C),A=n(12),U=n(55),T=r.a.memo((function(e){var t=Object(A.d)((function(e){return e.auth.isAuth})),n=Object(A.d)((function(e){return e.usersPage.followingInProgress})),o=Object(A.c)();Object(a.useEffect)((function(){e.getFriends()}),[e.state.friends.length]);var s=e.state.friends.length?e.state.friends.map((function(e){return r.a.createElement(E,{key:e.id,friend:e,isAuth:t,follow:function(e){return o(Object(U.b)(e))},unfollow:function(e){return o(Object(U.g)(e))},followingInProgress:n})})):r.a.createElement("div",{className:m.a.noFriends},"No friends");return r.a.createElement("nav",{className:m.a.nav},r.a.createElement("div",{className:m.a.item},r.a.createElement(p.b,{to:"/profile",activeClassName:m.a.activeLink},r.a.createElement("img",{src:w.a,alt:"home"}),"Profile")),r.a.createElement("div",{className:m.a.item},r.a.createElement(p.b,{to:"/users",activeClassName:m.a.activeLink},r.a.createElement("img",{src:P.a,alt:"users"}),"Users")),r.a.createElement("div",{className:m.a.item},r.a.createElement(p.b,{to:"/dialogs",activeClassName:m.a.activeLink},r.a.createElement("img",{src:j.a,alt:"dialogs"}),"Messages")),r.a.createElement("div",{className:m.a.item},r.a.createElement(p.b,{to:"/news",activeClassName:m.a.activeLink},r.a.createElement("img",{src:N.a,alt:"news"}),"News")),r.a.createElement("div",{className:m.a.item},r.a.createElement(p.b,{to:"/music",activeClassName:m.a.activeLink},r.a.createElement("img",{src:x.a,alt:"music"}),"Music")),r.a.createElement("div",{className:m.a.item},r.a.createElement(p.b,{to:"/settings",activeClassName:m.a.activeLink},r.a.createElement("img",{src:I.a,alt:"set"}),"Settings")),t?r.a.createElement("div",{className:m.a.friends},r.a.createElement("span",null,"Friends")," ",s):"")})),F=n(32),L=n(146),M=n.n(L),D=n(44),B=n.n(D),R=function(){return r.a.createElement("div",null,r.a.createElement("img",{className:M.a.development,src:B.a,alt:"The page in development"}))},G=n(147),H=n.n(G),z=function(){return r.a.createElement("div",null,r.a.createElement("img",{className:H.a.development,src:B.a,alt:"The page in development"}))},V=n(148),J=n.n(V),Y=function(){return r.a.createElement("div",null,r.a.createElement("img",{className:J.a.development,src:B.a,alt:"The page in development"}))},W=n(149),X=n.n(W),Z=n(60),K=n(16),q=n.n(K),Q=n(52),$=function(e){var t=Object(a.useState)(!1),n=Object(Z.a)(t,2),o=n[0],s=n[1],c=Object(a.useState)(e.status),i=Object(Z.a)(c,2),u=i[0],l=i[1];Object(a.useEffect)((function(){l(e.status)}),[e.status]);return r.a.createElement("div",{className:q.a.status},!o&&r.a.createElement("span",{title:e.isOwner?"double click!":"",onDoubleClick:e.isOwner?function(){s(!0)}:function(){}},e.status||"No status"),o&&r.a.createElement("input",{value:u,onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),e.updateStatus(u)}}))},ee=n(151),te=n.n(ee),ne=n(10),ae=n(134),re=n(25),oe=n.n(re),se=Object(ae.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,n=e.profile,a=e.error;return r.a.createElement("form",{className:q.a.profileData,onSubmit:t},a&&r.a.createElement("div",{className:oe.a.formSummaryError},a),r.a.createElement("div",null,r.a.createElement("button",null,"save")),r.a.createElement("div",null,r.a.createElement("b",null,"FullName"),": ",Object(ne.c)("Full name","fullName",[],ne.a)),r.a.createElement("div",null,r.a.createElement("b",null,"Looking for a job:")," ",Object(ne.c)("","lookingForAJob",[],ne.a,{type:"checkbox"})),n.lookingForAJobDescription&&r.a.createElement("div",null,r.a.createElement("b",null,"My professional skills:"),Object(ne.c)("My professional skills","lookingForAJobDescription",[],ne.b)),r.a.createElement("div",null,r.a.createElement("b",null,"About me"),": ",Object(ne.c)("About Me","aboutMe",[],ne.b)),r.a.createElement("div",null,r.a.createElement("b",null,"Contacts"),": ",Object.keys(n.contacts).map((function(e){return r.a.createElement("div",{key:e,className:q.a.contact},r.a.createElement("b",null,e,": ",Object(ne.c)(e,"contacts."+e,[],ne.b)))}))))})),ce=function(e){var t=e.profile,n=e.isOwner,a=e.goToEditMode;return r.a.createElement("div",{className:q.a.profileData},r.a.createElement("div",null,r.a.createElement("b",null,"Looking for a job:")," ",t.lookingForAJob?"Yes":"No"),t.lookingForAJobDescription&&r.a.createElement("div",null,r.a.createElement("b",null,"My professional skills:")," ",t.lookingForAJobDescription),r.a.createElement("div",null,r.a.createElement("b",null,"About me"),": ",t.aboutMe),r.a.createElement("div",null,r.a.createElement("b",null,"Contacts"),": ",Object.keys(t.contacts).map((function(e){if(t.contacts[e])return r.a.createElement(ie,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))),n&&r.a.createElement("div",null,r.a.createElement("button",{className:q.a.editButton,onClick:a},"edit")))},ie=function(e){var t=e.contactTitle,n=e.contactValue;return r.a.createElement("div",{className:q.a.contact},r.a.createElement("b",null,t),":",r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:n},n))},ue=function(e){var t=e.profile,n=e.status,o=e.updateStatus,s=e.isOwner,c=e.savePhoto,i=e.saveProfile,u=Object(a.useState)(!1),l=Object(Z.a)(u,2),f=l[0],m=l[1];if(!t)return r.a.createElement(Q.a,null);return r.a.createElement("div",{className:q.a.profileInfo},r.a.createElement("div",{className:q.a.photoBlock},r.a.createElement("img",{src:t.photos.large||b.a,alt:"ava",className:q.a.mainPhoto}),s&&r.a.createElement("div",{className:q.a.newPhoto},r.a.createElement("input",{type:"file",id:"input",onChange:function(e){e.target.files.length&&c(e.target.files[0])}}),r.a.createElement("label",{htmlFor:"input"},r.a.createElement("div",{className:q.a.addPhoto},r.a.createElement("img",{src:te.a,alt:"add file",width:"25"}),"Add new photo")))),r.a.createElement("div",{className:q.a.mainInfo},r.a.createElement("span",{className:q.a.fullName},t.fullName),r.a.createElement($,{isOwner:s,status:n,updateStatus:o}),f?r.a.createElement(se,{initialValues:t,profile:t,onSubmit:function(e){i(e).then((function(){m(!1)}))}}):r.a.createElement(ce,{profile:t,goToEditMode:function(){return m(!0)},isOwner:s})))},le=n(2),fe=n.n(le),me=n(5),pe=n.n(me),de=n(14),he=n(48),ve=n(8),be=n(11),ge=n(27),Ee="samurai-network/profile/ADD-POST",_e="samurai-network/profile/SET_USER_PROFILE",we="samurai-network/profile/SET_STATUS",Oe="samurai-network/profile/DELETE_POST",Pe="samurai-network/profile/SAVE_PHOTO_SUCCESS",ke={posts:[{id:1,message:"Hi!",likesCount:5},{id:2,message:"How are you!",likesCount:235},{id:3,message:"Hi 2!",likesCount:50},{id:4,message:"Hi 3!",likesCount:52}],profile:null,status:""},je=function(e){return{type:we,status:e}},ye=function(e){return function(){var t=Object(de.a)(pe.a.mark((function t(n){var a;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be.d.getProfile(e);case 2:a=t.sent,n((r=a.data,{type:_e,profile:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:var n={id:5,message:t.newPostBody,likesCount:0};return Object(ve.a)({},e,{posts:[].concat(Object(he.a)(e.posts),[n]),newPostText:""});case _e:return Object(ve.a)({},e,{profile:t.profile});case we:return Object(ve.a)({},e,{status:t.status});case Oe:return Object(ve.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case Pe:return Object(ve.a)({},e,{profile:Object(ve.a)({},e.profile,{photos:t.photos})});default:return e}},Se=n(99),xe=n.n(Se),Ce=n(153),Ie=n.n(Ce),Ae=function(e){return r.a.createElement("div",{className:Ie.a.item},r.a.createElement("img",{src:"https://yt3.ggpht.com/a/AATXAJytpZ2Vv11DPNUcNlgkoBeT3auVKnT2K1ZDFg=s900-c-k-c0xffffffff-no-rj-mo",alt:"ava"}),e.message,r.a.createElement("div",null,r.a.createElement("span",null,"Like - ",e.likesCount)))},Ue=n(93),Te=n(37),Fe=Object(Te.a)(10),Le=Object(ae.a)({form:"ProfileAddMyPostForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(Ue.a,{component:ne.b,name:"newPostBody",placeholder:"Enter your text",validate:[Te.b,Fe]})),r.a.createElement("div",null,r.a.createElement("button",null,"Add post")))})),Me=function(e){var t=e.posts.map((function(e){return r.a.createElement(Ae,{key:e.id,message:e.message,likesCount:e.likesCount})}));return r.a.createElement("div",{className:xe.a.postsBlock},r.a.createElement("h3",null,"My posts ",r.a.createElement("i",null,"(in working)")),r.a.createElement(Le,{onSubmit:function(t){e.addPost(t.newPostBody)}}),r.a.createElement("div",{className:xe.a.posts},t))},De=Object(A.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(function(e){return{type:Ee,newPostBody:e}}(t))}}}))(Me);De.propTypes={allPosts:fe.a.array};var Be=De,Re=function(e){return r.a.createElement("div",{className:X.a.content},r.a.createElement(ue,{profile:e.profile,status:e.status,isOwner:e.isOwner,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),r.a.createElement(Be,null))},Ge=n(9),He=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return r.a.createElement(Re,Object.assign({},this.props,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),n}(r.a.Component),ze=Object(Ge.d)(Object(A.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:ye,getStatus:function(e){return function(){var t=Object(de.a)(pe.a.mark((function t(n){var a;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be.b.getStatus(e);case 2:a=t.sent,n(je(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(de.a)(pe.a.mark((function t(n){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(je(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(de.a)(pe.a.mark((function t(n){var a;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be.b.savePhoto(e);case 2:0===(a=t.sent).data.resultCode&&n((r=a.data.data.photos,{type:Pe,photos:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(de.a)(pe.a.mark((function t(n,a){var r,o;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.userId,t.next=3,be.b.saveProfile(e);case 3:if(0!==(o=t.sent).data.resultCode){t.next=8;break}n(ye(r)),t.next=10;break;case 8:return n(Object(ge.a)("edit-profile",{_error:o.data.messages[0]})),t.abrupt("return",Promise.reject(o.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),F.g)(He),Ve=n(61),Je=n.n(Ve),Ye=n(154),We=n.n(Ye),Xe=function(e){return r.a.createElement("header",{className:Je.a.header},r.a.createElement("div",{className:Je.a.logo},r.a.createElement(p.b,{to:"/profile"},r.a.createElement("img",{alt:"logo",src:We.a}))),r.a.createElement("div",{className:Je.a.loginBlock},e.isAuth?r.a.createElement("div",{className:Je.a.userInfo},r.a.createElement("span",null,r.a.createElement(p.b,{to:"/profile"},e.login)),r.a.createElement(p.b,{to:"/profile"},r.a.createElement("img",{src:e.photo,alt:"ava"})),r.a.createElement("button",{onClick:e.logout},"Logout")):r.a.createElement(p.b,{to:"/login"},"Login")))},Ze="samurai-network/auth/SET_USER_DATA",Ke="samurai-network/auth/SET_USER_PHOTO",qe={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null,userPhoto:null},Qe=function(e,t,n,a,r){return{type:Ze,payload:{userId:e,email:t,login:n,isAuth:a,userPhoto:r}}},$e=function(e){return{type:"samurai-network/auth/GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},et=function(e){return{type:Ke,photo:e}},tt=function(){return function(){var e=Object(de.a)(pe.a.mark((function e(t){var n,a,r,o,s;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.me();case 2:0===(n=e.sent).resultCode&&(a=n.data,r=a.id,o=a.login,s=a.email,t(Qe(r,s,o,!0)),t(nt(o)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},nt=function(e){return function(){var t=Object(de.a)(pe.a.mark((function t(n){var a;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be.a.getAuthUserPhoto(e);case 2:a=t.sent,n(et(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},at=function(){return function(){var e=Object(de.a)(pe.a.mark((function e(t){var n,a;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.c.getCaptchaUrl();case 2:n=e.sent,a=n.data.url,t($e(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze:case"samurai-network/auth/GET_CAPTCHA_URL_SUCCESS":return Object(ve.a)({},e,{},t.payload);case Ke:return Object(ve.a)({},e,{userPhoto:t.photo});default:return e}},ot=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.isAuth&&this.props.getAuthUserPhoto(this.props.login)}},{key:"render",value:function(){return r.a.createElement(Xe,this.props)}}]),n}(r.a.Component),st=Object(A.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,photo:e.auth.userPhoto}}),{logout:function(){return function(){var e=Object(de.a)(pe.a.mark((function e(t){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.logout();case 2:0===e.sent.data.resultCode&&t(Qe(null,null,null,!1,null));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getAuthUserPhoto:nt})(ot),ct=n(100),it=n.n(ct),ut=Object(ae.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaUrl;return r.a.createElement("form",{onSubmit:t},Object(ne.c)("Email","email",[Te.b],ne.a),Object(ne.c)("Password","password",[Te.b],ne.a,{type:"password"}),Object(ne.c)(null,"rememberMe",[],ne.a,{type:"checkbox",text:"remember me"}),a&&r.a.createElement("img",{src:a,alt:"captcha"}),a&&Object(ne.c)("Symbols from image","captcha",[Te.b],ne.a),n&&r.a.createElement("div",{className:oe.a.formSummaryError},n),r.a.createElement("div",null,r.a.createElement("button",{className:it.a.button},"Login")))})),lt=Object(A.b)((function(e){return{captchaUrl:e.auth.captchaUrl,isAuth:e.auth.isAuth}}),{login:function(e,t,n,a){return function(){var r=Object(de.a)(pe.a.mark((function r(o){var s,c;return pe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,be.a.login(e,t,n,a);case 2:0===(s=r.sent).data.resultCode?o(tt()):(10===s.data.resultCode&&o(at()),c=s.data.messages.length>0?s.data.messages[0]:"Some Error",o(Object(ge.a)("login",{_error:c})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?r.a.createElement(F.a,{to:"/profile"}):r.a.createElement("div",{className:it.a.login},r.a.createElement("h1",null,"LOGIN"),r.a.createElement(ut,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))})),ft="samurai-network/app/INITIALIZED_SUCCESS",mt={initialized:!1},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft:return Object(ve.a)({},e,{initialized:!0});default:return e}},dt=n(133),ht=n(36),vt=n(155),bt=n(135),gt=Object(Ge.c)({profilePage:Ne,dialogsPage:dt.b,sidebar:ht.a,usersPage:U.a,auth:rt,app:pt,form:bt.a}),Et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ge.d,_t=Object(Ge.e)(gt,Et(Object(Ge.a)(vt.a))),wt=r.a.lazy((function(){return n.e(4).then(n.bind(null,313))})),Ot=r.a.lazy((function(){return n.e(3).then(n.bind(null,312))})),Pt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializedApp()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(st,null),r.a.createElement("div",{className:"app-wrapper-main"},r.a.createElement(T,{state:this.props.state.sidebar,getFriends:this.props.getFriends}),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(Q.a,null)},r.a.createElement(F.d,null,r.a.createElement(F.b,{exact:!0,path:"/",render:function(){return r.a.createElement(F.a,{to:"/profile"})}}),r.a.createElement(F.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(ze,null)}}),r.a.createElement(F.b,{path:"/dialogs",render:function(){return r.a.createElement(wt,null)}}),r.a.createElement(F.b,{path:"/users",render:function(){return r.a.createElement(Ot,null)}}),r.a.createElement(F.b,{path:"/login",render:function(){return r.a.createElement(lt,null)}}),r.a.createElement(F.b,{path:"/news",render:function(){return r.a.createElement(R,null)}}),r.a.createElement(F.b,{path:"/music",render:function(){return r.a.createElement(z,null)}}),r.a.createElement(F.b,{path:"/settings",render:function(){return r.a.createElement(Y,null)}}),r.a.createElement(F.b,{path:"*",render:function(){return r.a.createElement("div",null,"404 NOT FOUND")}})))))):r.a.createElement(Q.a,null)}}]),n}(r.a.Component),kt=Object(Ge.d)(F.g,Object(A.b)((function(e){return{state:e,initialized:e.app.initialized}}),{initializedApp:function(){return function(e){var t=e(tt());Promise.all([t]).then((function(){e({type:ft})}))}},getFriends:ht.b}))(Pt),jt=function(){return r.a.createElement(p.a,null,r.a.createElement(A.a,{store:_t},r.a.createElement(kt,null)))};s.a.render(r.a.createElement(jt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var a=n(5),r=n.n(a),o=n(14),s=n(8),c=n(11),i="samurai-network/sidebar/SET_FRIENDS",u={friends:[]},l=function(e){return{type:i,friends:e}},f=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.d.getFriends();case 2:n=e.sent,t(l(n.items));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(s.a)({},e,{friends:t.friends});default:return e}}},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=function(e){if(!e)return"error"},r=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},44:function(e,t,n){e.exports=n.p+"static/media/dev.707eca06.png"},52:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(150),s=n.n(o);t.a=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:s.a,alt:"loading",style:{height:"100px"}}))}},55:function(e,t,n){"use strict";n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return k})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return N})),n.d(t,"g",(function(){return S}));var a=n(5),r=n.n(a),o=n(14),s=n(48),c=n(8),i=n(11),u=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(c.a)({},e,{},a):e}))},l=n(36),f="samurai-network/users/FOLLOW",m="samurai-network/users/UNFOLLOW",p="samurai-network/users/SET_USERS",d="samurai-network/users/SET_CURRENT_PAGE",h="samurai-network/users/SET_PORTION_NUMBER",v="samurai-network/users/SET_TOTAL_USERS_COUNT",b="samurai-network/users/TOGGLE_IS_FETCHING",g={users:[],pageSize:20,totalUsersCount:0,currentPage:1,portionNumber:1,isFetching:!0,followingInProgress:[]},E=function(e){return{type:f,userId:e}},_=function(e){return{type:m,userId:e}},w=function(e){return{type:d,currentPage:e}},O=function(e){return{type:h,portionNumber:e}},P=function(e){return{type:b,isFetching:e}},k=function(e,t){return{type:"samurai-network/users/TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},j=function(e,t){return function(){var n=Object(o.a)(r.a.mark((function n(a){var o,s,c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(P(!0)),n.next=3,i.d.getUsers(e,1);case 3:return o=n.sent,s=Math.ceil(o.totalCount/t)-e+1,n.next=7,i.d.getUsers(s,t);case 7:c=n.sent,a(P(!1)),a(w(e)),a((u=c.items.reverse(),{type:p,users:u})),a((r=c.totalCount,{type:v,count:r}));case 12:case"end":return n.stop()}var r,u}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(){var e=Object(o.a)(r.a.mark((function e(t,n,a,o){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(k(!0,n)),e.next=3,a(n);case 3:0===e.sent.resultCode&&t(o(n)),t(k(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),N=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(n,e,i.d.followUser.bind(i.d),E),n(Object(l.b)());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(n,e,i.d.unfollowUser.bind(i.d),_),n(Object(l.b)());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(c.a)({},e,{users:u(e.users,t.userId,"id",{followed:!0})});case m:return Object(c.a)({},e,{users:u(e.users,t.userId,"id",{followed:!1})});case p:return Object(c.a)({},e,{users:t.users});case d:return Object(c.a)({},e,{currentPage:t.currentPage});case h:return Object(c.a)({},e,{portionNumber:t.portionNumber});case v:return Object(c.a)({},e,{totalUsersCount:t.count});case b:return Object(c.a)({},e,{isFetching:t.isFetching});case"samurai-network/users/TOGGLE_IS_FOLLOWING_PROGRESS":return Object(c.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(s.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},61:function(e,t,n){e.exports={header:"Header_header__3f3e0",logo:"Header_logo___35yd",loginBlock:"Header_loginBlock__P5X5G",userInfo:"Header_userInfo__2ojYh"}},71:function(e,t,n){e.exports=n.p+"static/media/user.2c6e94aa.png"},75:function(e,t,n){e.exports={content:"Friend_content__nUoU6",ava:"Friend_ava__2RnuO",name:"Friend_name__2pqZ7"}},99:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__2Coj_",posts:"MyPosts_posts__2wpFQ"}}},[[181,1,2]]]);
//# sourceMappingURL=main.ebaf4fe2.chunk.js.map